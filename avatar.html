<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>A-Frame Soldier â€” stable minimal</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://aframe.io/releases/1.7.1/aframe.min.js"></script>
    <script src="./character.js"></script>
    <script src="./checker.js"></script>
    <script src="./targets.js"></script>
    <script src="./blaster.js"></script>
    <style>
      body {
        margin: 0;
        background: #5e5d5d;
      }
    </style>
  </head>
  <body>
    <a-scene background="color:#5e5d5d" shadow="type:pcfsoft" tabindex="0">
      <!-- fixed camera (no look-controls) -->
      <a-entity camera position="0 2 8" look-controls="enabled:false"></a-entity>

      <!-- lights -->
      <a-entity light="type:hemisphere; intensity:1.5; color:#fff; groundColor:#888" position="0 10 0"></a-entity>
      <a-entity light="type:directional; intensity:3; castShadow:true" position="-2 5 -3"></a-entity>

      <!-- ground -->
      <a-plane
        rotation="-90 0 0"
        width="200"
        height="200"
        checker-floor="squares:16; color1:#808080; color2:#505050"
        shadow="receive:true"></a-plane>

      <!-- soldier -->
      <a-entity
        id="soldier"
        gltf-model="https://threejs.org/examples/models/gltf/Soldier.glb"
        position="0 0 0"
        shadow="cast:true"
        minichar="idleIdx:0; walkIdx:3; runIdx:1"
        blaster="bulletSpeed:18; fireRate:8; bulletRadius:0.08; color:#ffcc00">
      </a-entity>
    </a-scene>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const scene = document.querySelector("a-scene");
        const spawn = () => {
          // make sure targets.js is loaded BEFORE this runs
          scene.systems["target-spawner"].spawnRandom(25, { radiusMin: 6, radiusMax: 18 });
        };
        if (scene.hasLoaded) spawn();
        else scene.addEventListener("loaded", spawn);
      });
    </script>
  </body>
</html>
